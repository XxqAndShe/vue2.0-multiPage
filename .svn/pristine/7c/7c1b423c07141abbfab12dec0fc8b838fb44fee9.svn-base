define(["jquery","ELEMENT"],function(l,o){return{baseUrl:"http://192.168.8.218:7070",domain:window.location.origin,init:function(e){return this.setAjaxContext(e),this.register$messageMethods(),this.register$notifyMethods(),this.register$alertMethods(),this.register$confirmMethods(),this},setAjaxContext:function(e){return l.ajaxSetup({context:e}),this},ajax:function(e){var t=this;return e.url=this.baseUrl+e.url,l.ajax(e).catch(function(e){t.$message.error("请检查您的网络")})},get:function(){var t=this;return arguments[0]=this.baseUrl+arguments[0],l.get.apply(null,arguments).catch(function(e){t.$message.error("请检查您的网络")})},post:function(){var t=this;return arguments[0]=this.baseUrl+arguments[0],l.post.apply(null,arguments).catch(function(e){t.$message.error("请检查您的网络")})},noticeListens:{"element-message":!1,"element-notification":!1,"element-MessageBox-alert":!1,"element-MessageBox-confirm":!1,"element-MessageBox-prompt":!1},noticeTypes:["success","warning","info","error"],$alert:function(s,a,r){var c=this;return top===self?o.MessageBox.alert(s,a,r):window.top.location.origin===this.domain?new Promise(function(t,e){window.removeEventListener("message",i);var o,n={type:"element-MessageBox-alert",method:"$msgbox.alert",message:s,title:a,options:r};function i(e){window.location.origin===(e.origin||e.originalEvent.origin)&&"element-MessageBox-alert"===e.data.type&&(o?o(e.data.data):t(e.data.data))}"object"===l.type(r)&&(r.callback&&"function"===l.type(r.callback)&&(o=r.callback,delete r.callback),r.beforeClose&&delete r.beforeClose),window.addEventListener("message",i),window.top.postMessage(n,c.domain)}):void 0},register$alertMethods:function(){if("function"!==l.type(this.$alert.success)){var i=this;this.noticeTypes.forEach(function(n){this.$alert[n]=function(e,t,o){return"object"===l.type(t)?(o=t,t=""):(t=t||"",o=o||{}),o.type=n,i.$alert(e,t,o)}},this)}},$confirm:function(s,a,r){var c=this;return top===self?o.MessageBox.confirm(s,a,r):window.top.location.origin===this.domain?new Promise(function(t,o){window.removeEventListener("message",i);var n,e={type:"element-MessageBox-confirm",method:"$msgbox.confirm",message:s,title:a,options:r};function i(e){window.location.origin===(e.origin||e.originalEvent.origin)&&"element-MessageBox-confirm"===e.data.type&&(n?n(e.data.data):"cancel"===e.data.data?o():t())}"object"===l.type(r)&&(r.callback&&"function"===l.type(r.callback)&&(n=r.callback,delete r.callback),r.beforeClose&&delete r.beforeClose),window.addEventListener("message",i),window.top.postMessage(e,c.domain)}):void 0},register$confirmMethods:function(){if("function"!==l.type(this.$confirm.success)){var i=this;this.noticeTypes.forEach(function(n){this.$confirm[n]=function(e,t,o){return"object"===l.type(t)?(o=t,t=""):(t=t||"",o=o||{}),o.type=n,i.$confirm(e,t,o)}},this)}},$prompt:function(i,s,a){var r=this;return top===self?o.MessageBox.prompt(i,s,a):window.top.location.origin===this.domain?new Promise(function(t,o){window.removeEventListener("message",n);var e={type:"element-MessageBox-prompt",method:"$msgbox.prompt",message:i,title:s,options:a};function n(e){window.location.origin===(e.origin||e.originalEvent.origin)&&"element-MessageBox-prompt"===e.data.type&&("cancel"===e.data.data?o():t(e.data.data))}"object"===l.type(a)&&(a.type&&delete a.type,a.callback&&delete a.callback,a.beforeClose&&delete a.beforeClose),window.addEventListener("message",n),window.top.postMessage(e,r.domain)}):void 0},$message:function(e){if(top===self)return o.Message(e);if(window.top.location.origin===this.domain){var t={type:"element-message",method:"$message",options:e};window.top.postMessage(t,this.domain)}},register$messageMethods:function(){if("function"!==l.type(this.$message.success)){var o=this;this.noticeTypes.forEach(function(t){this.$message[t]=function(e){"string"===l.type(e)?e={type:t,message:e}:e.type=t,o.$message(e)}},this)}},$notify:function(e){if(top===self)return o.Notification(e);if(window.top.location.origin===this.domain){var t={type:"element-notification",method:"$notify",options:e};window.top.postMessage(t,this.domain)}},register$notifyMethods:function(){if("function"!==l.type(this.$notify.success)){var o=this;this.noticeTypes.forEach(function(t){this.$notify[t]=function(e){"string"===l.type(e)?e={type:t,message:e}:e.type=t,o.$notify(e)}},this)}},onPostMessageOfNotice:function(e){var n=this;if(self!==top)return!1;l.extend(this.noticeListens,e),window.addEventListener("message",function(o){var e=o.origin||o.originalEvent.origin;n.domain===e&&("element-message"===o.data.type&&n.noticeListens["element-message"]&&n.$message(o.data.options),"element-notification"===o.data.type&&n.noticeListens["element-notification"]&&n.$notify(o.data.options),"element-MessageBox-alert"===o.data.type&&n.noticeListens["element-MessageBox-alert"]&&(console.log(o.data),n.$alert(o.data.message,o.data.title,o.data.options).then(function(e){var t={type:"element-MessageBox-alert",data:e};o.source.postMessage(t,n.domain)})),"element-MessageBox-confirm"===o.data.type&&n.noticeListens["element-MessageBox-confirm"]&&n.$confirm(o.data.message,o.data.title,o.data.options).then(function(){o.source.postMessage({type:"element-MessageBox-confirm",data:"confirm"},n.domain)}).catch(function(){o.source.postMessage({type:"element-MessageBox-confirm",data:"cancel"},n.domain)}),"element-MessageBox-prompt"===o.data.type&&n.noticeListens["element-MessageBox-prompt"]&&n.$prompt(o.data.message,o.data.title,o.data.options).then(function(e){var t={type:"element-MessageBox-prompt",data:e};o.source.postMessage(t,n.domain)}).catch(function(){o.source.postMessage({type:"element-MessageBox-prompt",data:"cancel"},n.domain)}))})}}});